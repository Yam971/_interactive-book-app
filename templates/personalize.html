<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Personalize Your Book</title>

  <!-- Favicon -->
  <link 
    rel="icon" 
    href="{{ url_for('static', filename='images/whataread-favicon.png') }}" 
    type="image/png"
  >

  <!-- Link to the external CSS -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/personalize.css') }}">
</head>
<body>
  <!-- Header -->
  <div class="personalize-header">
    <span class="header-title">When You Were Born</span>
    <button class="header-close" id="close-button">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
        <path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"/>
      </svg>
    </button>
  </div>

  <!-- Form Section -->
  <div class="personalize-form-section">
    <div class="personalize-form-container">
      <h2 class="step-title">Step 1 of 3</h2>
      <h3 class="subtitle">Who are you making this book for?</h3>

      <!-- Personalization Form -->
      <form id="personalization-form">
        <!-- First Name Field -->
        <label for="child-name" class="label">First name</label>
        <div class="autocomplete">
          <input 
            type="text" 
            name="child_name" 
            id="child-name" 
            class="input-field" 
            required
          >
          <span 
            id="name-validation-icon" 
            class="validation-icon"
          ></span>
        </div>

        <!-- Gender Selection -->
        <label class="label">Choose their character</label>
        <div class="gender-selection">
          <button type="button" id="boy" class="gender-btn">Boy</button>
          <button type="button" id="girl" class="gender-btn">Girl</button>
        </div>

        <!-- Character Selection -->
        <div class="character-selection-grid">
          {% for i in ['i', 'ii', 'iii', 'iv', 'v', 'vi'] %}
          <div class="character-option" data-character="{{ i }}">
            <img 
              src="{{ url_for('static', filename='images/girl_type-' ~ i ~ '.png') }}" 
              alt="Character {{ i }}" 
              class="character-img"
            >
          </div>
          {% endfor %}
        </div>

        <!-- Hidden Fields -->
        <input type="hidden" name="gender" id="gender-id">
        <input type="hidden" name="character" id="character-id">

        <!-- Continue Button -->
        <button type="submit" class="continue-btn">Continue</button>
        
        <!-- Back to Product Page Link -->
        <a 
          id="back-to-product-link" 
          class="back-to-product-page" 
          href="/"
        >
          ← Back to the product page
        </a>
      </form>
    </div>
  </div>

  <!-- Link to the external JavaScript -->
  <script src="{{ url_for('static', filename='js/personalize.js') }}"></script>

  <footer>
    <div class="footer-content">
      <img 
        src="{{ url_for('static', filename='images/whataread-footer-logo.png') }}" 
        alt="WhataRead Logo" 
        class="footer-logo"
      >
      <p class="footer-text">© 2025 WhataRead. All rights reserved.</p>

      <!-- NEW: Caching Status in the footer -->
      <div id="caching-status" style="font-size: 0.9rem; color: #444; margin-top: 8px;">
        <!-- Will be updated by JS once caching finishes. -->
      </div>
    </div>
  </footer>
</body>
</html>
